---
title: "Homework 9"
output: 
  html_notebook:
  toc: yes
  toc_float: yes
author: Wenlong Li
---

### 2.1-a
```{r}
library(dplyr)
rm(list=ls())

# Set working directory as needed
setwd("./")
df <- read.csv("products.csv",sep = ',',header = F)
df

canonical_conversion <- function(originFilePath, canonicalFilePath, df){
  tr_k <- file(originFilePath, "r")
  tr_k_canonical <- file(canonicalFilePath, "w")
  line=readLines(tr_k,n=1)
  while(length(line) != 0 ) {
    index = 1
    str <- ""
    for(item in unlist(strsplit(line,split = ","))){
      if(index > 1){
        splitStr = ""
        if(nchar(str)!=0){
          splitStr = ","
        }
        str <- paste0(str, splitStr, df[as.integer(item)+1,2])
      }
      index <- index+1
    }
    writeLines(text = str, con = tr_k_canonical)
    line=readLines(tr_k,n=1)
  }
  close(tr_k)
  close(tr_k_canonical)
}

tr_list <- c("tr-1k.csv","tr-5k.csv","tr-20k.csv", "tr-75k.csv");
tr_canonical_list <- c("tr-1k-canonical.csv","tr-5k-canonical.csv","tr-20k-canonical.csv", "tr-75k-canonical.csv");

for (item in 1:length(tr_list)) {
  canonical_conversion(tr_list[item], tr_canonical_list[item], df)
}

```
### 2.1-b
```{r}

```

